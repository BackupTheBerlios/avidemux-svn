<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-2">
<link title="new" rel="stylesheet" href="../plop.css" type="text/css">
<title>Avidemux 
	
		Documentation
	
-- 
	B-frames</title>
</head>
<body style="margin-left:0px;margin-top:0px;" bgcolor="#ffffff"><table width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td valign="top" align="right" colspan="1" bgcolor="#ffffff"><table border="0" cellspacing="0" cellpadding="0" width="100%"><tr><td width="99%" class="content" valign="top" align="left">
<br><p class="dochead">B-frames</p>
<p class="chaphead"><span class="chapnum"><a name="doc_chap1">1.</a></span>B-frames</p>
<p class="secthead"><a name="doc_chap1_sect1">Úvod </a></p>
<ul>
	<p>
	Tato èást je úvodem do práce s B snímky. Pokud jste s touto problematikou ji¾ obeznámeni, mù¾ete ji klidnì pøeskoèit.
	</p>	
	<p>Video snímky se dají rozdìlit na tøi typy:
	<ul>
		<li>I-frame: Intra frame, nazývaný té¾ klíèový snímek (keyframe). Nemají ¾ádný referenèní snímek a mohou být dekódovány samostatnì. Mù¾ete si je pøedstavit jako obrázek JPEG.</li>
		<li>P-frame: Predicted frame. P snímky jsou odvozeny z pøedchozího snímku (I nebo P) a nemohou být sestaveny dokud dekodér nedekódoval pøedchozí snímky.</li>
		<li>B-frame: B snímky jsou dekódovány z pøedchozích a následujících I/P snímkù. </li>
	</ul>
	</p>
	<p>
	B snímky jsou zajímavé ze dvou dùvodù. Za prvé mají trochu lep¹í predikci. A za druhé, co¾ je dùle¾itìj¹í, neovlivòují kvalitu následujících snímkù, tak¾e mohou být kódovány s ni¾¹í kvalitou, ani¾ by degradovaly kvalitu celé sekvence.
	</p>
	<p>Proto¾e B snímky závisí na pøedchozím i následujícím obraze, dekodér musí dostat následující I/P snímky døíve ne¾ je mù¾e dekódovat.</p>
	<p>Tady pøichází na øadu PTS/DTS logika.</p>
	<p> Presentation Time Stamp je prezentaèní èas, tedy nìco jako èíslo zobrazení snímku. To je poøadí ve kterém uvidíte dekódované snímky.
	</p>
	<p>DTS je Decoder Time Stamp, tedy èíslo dekódování snímku.</p>
	<p>Pøedpokládejme napøíklad takovéto video: I-0 B-1 B-2 P-3</p>
	<p>B-1 a B-2 závisí na I-0 i P-3. Pøíslu¹né DTS poøadí bude: I-0 P-3 B-1 B-2.</p>
	<p>Jednodu¹e øeèeno, soubor je zakódován v DTS poøadí.</p>
	</ul>
	<p class="secthead"><a name="doc_chap1_sect2">No a? </a></p>
<ul>
		<p>
			Problém je, ¾e k tomu, aby se video zobrazovalo ve správném poøadí, musí kodek vypou¹tìt snímky ve správném poøadí a sekvenènì (tj. jeden snímek do, jeden snímek ven). 
		</p>
	</ul>
<p class="secthead"><a name="doc_chap1_sect3">MPEG (správný zpùsob) </a></p>
<ul>
		<p>
			Obvyklý zpùsob je ¾e kodek zpozdí dekódování o 3 snímky. Takto má v¾dy ty dva referenèní snímky potøebné k dekódování snímku. 
		</p>
		<p> Vstup  0 3 1 2 . .</p>
		<p> Výstup - - - 0 1 2 3 . .</p>
		<p>
			To je pro pøehrávaèe zcela v poøádku, proto¾e to zpo¾dìní je známo pøi vytváøení souboru a tudí¾ kompenzováno (tj. zùstane zachována synchronizace se zvukem).
		</p>
	</ul>
<p class="secthead"><a name="doc_chap1_sect4">DivX (a XviD) </a></p>
<ul>
		<p> Aby se PTS/DTS mohl pou¾ívat s aplikacemi, které nejsou pøipraveny na práci s takovýmto streamem, kodek DivX (a XviD v kompatibilním re¾imu) pou¾ívá jiný trik.
		</p>
		<p>Pou¾ívá variantu PB snímkù a zabalí nìkolik snímkù do jednoho. Tak¾e aplikace si myslí, ¾e to je jen jeden snímek a kodek toto v¹echno internì skryje.
		</p>
		<p>Vezmeme-li si pøedchozí pøíklad, DivX by vytvoøil takovýto soubor (závorky znamenají jeden snímek v souboru):
		</p>
		<p> Vstup (0 3 1 2) - - - . . . </p>
		<p>Výstup 0         1 2 3 ....</p>
	<p>Tam kde byly zabalené snímky se vlo¾í snímky prázdné. Kodek ví, ¾e kdy¾ obdr¾í prázdný snímek po balíèku snímkù, má vypustit snímky z toho balíèku.</p>
	<p>To je zajímavé, proto¾e to nezpùsobuje zpo¾dìní mezi vstupem a výstupem a AVI soubory nemají PTS/DTS políèko pro informaci dekodéru/pøehrávaèe.</p>
	</ul>
<p class="secthead"><a name="doc_chap1_sect5">No a? 2. èást </a></p>
<ul>
		<p>Toto chování je v rozporu s cílem Avidemuxu: poskytovat snímkovou pøesnost. 
		</p>
		<p>U MPEG zpùsobu je zpo¾dìní mezi tím co je pøedáváno kodeku a jeho výstupem. To je nepøijatelné, proto¾e byste nikdy nevìdìli, na který snímek se ve skuteènosti díváte.
		</p>
		<p>DivX/XviD zpùsob je záludný, proto¾e snímky 2 3 4 jsou vidìny jako prázdné snímky a <b>nelze</b> støíhat takovýto stream s pøesností na snímky.
		</p>
	</ul>
<p class="secthead"><a name="doc_chap1_sect6">Co tedy Avidemux dìlá? </a></p>
<ul>
		<p>Jednodu¹e, Avidemux pracuje s PTS/DTS logikou sám a nutí kodek vypou¹tìt snímky okam¾itì. Editaèní èást Avidemuxu zná DTS/PTS poøadí snímkù a pøedává dekodéru snímky správnì. Máte snímkovou pøesnost i B-frames.
		</p>
		<p>Problém je to, ¾e DivX/XviD skrývá typ snímkù jejich zabalením, tak¾e editor si s tím zatím neporadí.
		</p>
		<p>V Avidemuxu od verze 2.0.24 je packed bitstream automaticky rozbalen pøi naètení. Ale jen u AVI/OpenDML. Pokud je zdrojem OGM soubor, ulo¾te jej nejdøív jako AVI a otevøete.
		</p>
	</ul>
<br><br>
</td></tr></table></td></tr></table></body>
</html>
