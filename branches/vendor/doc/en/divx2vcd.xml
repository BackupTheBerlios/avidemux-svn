<?xml version='1.0' encoding="UTF-8"?>
<guide >
<title>Mpeg to Divx tutorial</title>
<author title="mean"><mail link="fixounet@free.fr">
Mean</mail>
</author>

<abstract>
Divx to VCD </abstract>

<version>1.0</version>
<date>08 Feb 2003</date>
<chapter>
<title>Getting ready</title>
<body>
This page is an example of encoding a divx avi to a VCD. 
You will be able to deduce the settings to encode to SVCD. The DVD case is slightly different as 
avidemux is able to output proper mpeg PS (audio+video) files directly, see <uri link="dvd.xml.html">DVD</uri>
</body>
<section>
<title>Input stream</title>
<body>
<ul>
<p>
Any avi with suitable codecs can be encoded into a VCD. For example Divx+MP3
(note that you need mad to handle the MP3 stream).
</p>
<p>The VCD export is done in 3 steps : encoding video, encoding audio and muxing.
</p>
</ul>
</body>
</section>
<section>
<title>Encoding the video</title>
<body>
<ul>
<p>
First we will resize the video to fit the video CD spec
</p>
<p>
It means 352*240 for NTSC or 352*288 for PAL
</p>
<p>
After loading the source AVI, popup the video filter window by <c>F1</c>.
</p>
<p>
	<img src="../image_tuto/filters.png">filters</img>
</p>
<p>
Click the button on the right side <c>VCD res</c>. This button will automatically resize the video and add black border to get a proper video size without altering the aspect ratio.
</p>
<p>
Now select the video codec using the vcodec button. Select VCD. Nothing to configure here.
</p>
<p>Finaly  <c>File->Save video</c> and select the video stream file. For example /tmp/videocd.m1v.
</p>
<p>Now you can read some other avidemux docs and come back a couple of hours later.
</p>
</ul>
</body>
</section>
<section>
<title>Encoding the audio</title>
<body>
<ul>
<p>The audio is most probably encoded in a format which is not compatible with VCD. So we will re-encode it.</p>
<p>
Set the audio to process mode <c>F6</c>, and select the audio codec <c>F4</c>.
</p><p>
<img src="../images/audiocodec.png"></img>
</p>
<p>
Select <c>FFmpeg audio codec</c>, and press the configure button. You must enter <c>Stereo</c> and <c>224 kbps</c>.
</p>
<p>
<img src="../images/audioconfig.png"></img>
</p>
<p> Now, we will add some audio filters that may be needed, to that effect press <c>F2</c>. </p>
<p>There is three possibilities here :
<ul>
	<li>The audio is 44.1 Khz, select none.</li>
	<li>The audio is 48 Khz, select 48 to 44.1.</li>
	<li>The audio is at another frequency, select <c>Resample</c> and enter 44100.</li>
</ul>
You may want to add <c>Normalize</c> if needed.
</p>
<p>
<img src="../images/audiofilter.png"></img>
</p>

<p>
Select <c>File -> Save audio</c> for example /tmp/videocd.mp2. Re-read avidemux doc, watch a holiday movie, read a book and come back an hour later.
</p>
</ul>
</body>
</section>
</chapter>
<chapter>
<title>After avidemux</title>
<section>
<title>Muxing the result </title>
<body>
<ul>
<p>
Now you have your video and audio streams ready.
Use mplex like this : 
</p>
<p>
mplex  -S XXX -f 1 -o /tmp/videocd.mpg videocd.m1v videocd.mp2
</p>
<p>The XXX value is to be replace by the size of your CD : 790 for a 80 mn CD.
</p>
<p>Once this is done you have a valid videocd.mpg file. Time to create a VCD
</p>
</ul>
</body>
</section>
<section>
<title>VCD imager </title>
<body>
<ul>
<p>
To do a simple VCD without chapters, menus etc.. just do
</p>
<p>
<c>vcdimager -t vcd20 videocd.mpg</c>
</p>
<p>This will create videocd.cue and videocd.bin, that can be burnt using cdrdao.
</p>
</ul>
</body>
</section>
</chapter>
<chapter>
<title>Bash rules</title>
<section>
<title>Same thing without GUI </title>
<body>
<ul>
<p>
 You can do the same operations using the command line
</p>
<p>
<c>avidemux --load input.avi --vcd-res --video-process --video-codec VCD --save /tmp/videocd.m1v --audio-process --audio-normalize --audio-downample --audio-codec MP2 --audio-bitrate 224 --save-uncompressed-audio /tmp/videocd.mp2 --quit</c>
</p>
<p>That way you can do a fully automatic avi->VCD script
</p>
</ul>
</body>
</section>
</chapter>
</guide>
