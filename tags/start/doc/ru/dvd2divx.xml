<?xml version='1.0' encoding="KOI8-R"?>
<guide >
<title>Пример конвертирования Mpeg в Divx </title>
<author title="mean"><mail link="fixounet@free.fr">
Mean</mail>
</author>

<abstract>
Mpeg to Divx
 </abstract>

<version>1.0</version>
<date>08 Feb 2003</date>
<chapter>
<title>Подготовка</title>
<body>
Здесь описан пример перекодирования mpeg1 или 2 (DVD
например) в AVI, используя xvid видео кодек и mp3 звук.
</body>
<section>
<title>Входной поток</title>
<body>
<p>
 Только mpeg видео (m1v and m2v) и mpeg-ps поддерживаются в Avidemux
(mpg/vob).
 Поток должен быть с одним angle (точкой обзора), не шифрованный. Назовем его
stream.mpg
</p>
<p>
 Если источник dvd, можно использовать Mplayer :
 <c>mplayer -dvd 1 -dumpstream</c>.
 Это создаст читаемый в avidemux vob из DVD.
</p>
<p>
	VDR файлы пока не поддерживатся.
</p>
</body>
</section>
<section>
<title>Индексирование</title>
<body>
<p>
Avidemux не может читать mpeg поток непосредственно, прежде он должен прочитать индекс этого mpeg потока.
</p>
<p>
Индекс mpeg потока это обычный текстовый файл описывающий mpeg и последовательность кадров. По структуре он схож с d2v из DVD2AVI.
</p>
<p>Этот индекс позволяет делать в avidemux случайный поиск с точностью до кадра.
</p>
<p>
Чтобы создать индекс, необходимы следующие шаги:
<ul>
<li>Выбрать в меню <c>misc->index mpeg</c></li>
<li>Открыть mpeg файл, avidemux предложит проиндексировать его (учтите, вы не сможете открыть файл, это нормально)</li>
</ul>
Вы увидите подобное:
</p>
<p><img src="../image_tuto/indexMpg.png"></img>
</p>
<p>
С индексами для mpeg все ясно.
</p>
<p>
С полями id в потоках звука несколько запутанно.
<ul>
<li>Если mpeg поток содержит mpeg-audio поток (.mp2), как в VCD : C0 - первый аудио трек, C1 - второй и т.д.</li>
<li>Если поток содержит AC3 звук, 0 это первая AC3 дорожка, 1 - вторая и т.д. </li>
</ul>
Теперь дождитесь, пока будет просчитан индекс и откройте созданный индексный файл.
<warn>Произвольный поиск иногда работает некорректно, но с последовательным доступом все отлично (напр. кодирование)</warn>
<warn>Для пользователей TiVo необходимо увеличить значение переменной MG_CACHE до 70, т.к.  TiVo может использовать очень большой размер gop</warn>
Теперь мы готовы работать с потоком.
</p>
</body>
</section>
</chapter>
<chapter>
	<title>Редактирование видео</title>
<section>
	<title>NSTC vs Film</title>
	<body><ul>
		<p>
			Некоторые DVD кодированы с fps 23.976 aka FILM (большинство). Други используют значение 29.97 (NSTC), soap например. В первом случае DVD проигрыватель конвертирует налету в NSTC format (telecine). Таким образом, в заголовках mpeg всегда указано значение 29.96 и это всегда будет конечным форматом.
		</p>
		<p>Avidemux использует mpeg2dec для декодирования mpeg потока (с небольшими изменениями). Mpeg2dec не выполняет telecine для FILM  .
		</p>
		<p>Это означает, что avidemux не может определить разницу между FILM и NSTC.
		Если вы заметили все возрастающую рассинхронизацию видео и звука, используйте <c>Video Processing->Change framerate</c> и установите значение 23.976.
		</p>
		<p>Для mpeg в PAL проблем нет, они всегда имеют  25 fps.
		</p>
	</ul></body>
</section>
<section>
	<title>Cropping</title>
	<body><ul>
		<p>Теперь вы должны иметь что-то подобное :</p>
		<img src="../image_tuto/mpeg.png"></img>
	<p> Время подобрать фильтры. CTRL+F выдаст список возможных.</p>

		<img src="../image_tuto/filters.png"></img>
		<p>
	Мы будем использовать Crop фильтр для удаления черных бордюров.
		Если поток качественный, можете попробовать <c>autoCrop</c> кнопку.
		На примере бордюры очень небольшие. Они отображаются зеленым для наглядности.

		</p>
		<img src="../image_tuto/crop.png"></img>
	</ul></body>
</section>
<section>
	<title>Resizing</title>
	<body><ul>

		<p> После обрезания, изменим размеры на что-нибудь меньшее.
		</p>
		<p>Не забывайте, что большинство DVD в формате 16/9, имейте это ввиду при изменении размеров. Откройте снова окно фильтров и выбирите resize .
		</p>
		<p>Изменим размер до 480x272, помня про 16/9, причем ширина должна быть кратна 16, а высота 8.
		</p>
		<p>В любое время вы можете изменить настройки фильтра щелкнув кнопку <c>configure</c>. Для оценки результата используйте кнопку <c>preview</c> или  режим play с нажатой кнопкой <c>output</c> .
		</p>
		<p> Для информации, наша цепочка видео фильтров выглядит так:
		</p>
		<img src="../image_tuto/filter2.png"></img>

		<img src="../image_tuto/resized.png"></img>
	</ul></body>
</section>
<section>
	<title>Больше фильтров</title>
	<body><ul>

		<p> В зависимости от исходного материала и поставленной цели вам могут понадобиться дополнительные фильтры (subtitling, denoiser, deinterlacer...). Читайте раздел <uri link="video.xml.html">video filters</uri> .
		</p>
		<p>Вы можете открыть окно предпросмотра и "прокручивать" видео в основном окне бегунком или "горячими" клавишами, предпросмотр так же будет обновляться.
		</p>
	</ul></body>
</section>
</chapter>
<chapter>
	<title>Настройка кодирования</title>
<section>
	<title>Кодеки</title>
	<body><ul>
		<p> Т.к. мы будем кодировать, нужно выставить режим process для видео.

		</p>
		<p>Выбраем кодек. Я предпочитаю Xvid и Lavcodec. Вы можете найти win-tutorial для Xvid, для lavcodec обратитесь к документации на mplayer.
		</p>
		<p> Divx версия для Linux очень отстает, поэтому не будем говорить об этом.
		</p>
		<p> Возьмем Xvid для нашего небольшого примера.
		</p>
	</ul></body>
</section>
<section>
	<title>Настройка кодека</title>
	<body><ul>
		<p> Сначала определим файл журнала для второго прохода <c>Video processing->Set log file</c>
		</p>
		<p>Выбор меню <c>Video processing->configure codec</c> покажет этот диалог.
		</p>
		<img src="../image_tuto/xvid.png"></img>
		<p>Используем 2pass и введем конечный размер . Это рамер чистого видео без служебных заголоков avi, поэтому делайте 5% запас. Установим размер равным 600 и нажмем ok.
		</p>
	</ul></body>
</section>
</chapter>
<chapter>
	<title>Установки звука</title>
<section>
	<title>Внутренний звук</title>
	<body><ul>
		<p>Если используется звук, который был выбран при индексировании, ничего делать не надо.
		</p>
	</ul></body>
</section>
<section>
	<title>Внешний звук</title>
	<body><ul>
		<p>Можно использовать внешний звук через меню <c>Audio-source</c>.
		</p>
	</ul></body>
</section>
<section>
	<title>Режим process или нет ?</title>
	<body><ul>
		<p>Если желаете сохранить звук "как есть", например сделать Xvid+AC3, то ничего не меняйте.
		</p>
		<p>Иначе установите audio в режим process  и подключите (например) Normalize, 48->44. С деталями ознакомтесь здесь <uri link="audio.xml.html">audio filters</uri>
		</p>
	</ul></body>
</section>
<section>
	<title>Аудио кодеки</title>
	<body><ul>
		<p>Процедура такая-же, как и для видео, выберите кодек, MP3 например, и настройте его		</p>
		<p>Установим 128 kbps joint stereo, как здесь</p>
		<img src="../image_tuto/mp3.png"></img>
	</ul></body>
</section>
</chapter>
<chapter>
	<title>Сохранение </title>
<section>
	<body><ul>
		<p>Теперь выберите <c>File->Save avi</c> и ждите.... Готово.
		Avidemux выполнит первый проход, затем второй и перекодирует звук.
		</p>
		<img src="../image_tuto/encoding.png"></img>
	</ul></body>
</section>
</chapter>
</guide>
